def init
resources(PostsController, 'posts') создает экземпляр класса PostsController.new, в @routes записывает по ключу 'posts' - маппинг с роутами, где GET - имеет 2 ключа (index и show) и значения для этих ключей это ссылка на метод в экземпляре класса.
В loop do класса Router происходит выбор класса контроллера и туда передается маппинг с ссылками на метод.
В классе PostsController примешан(добавлен) метод connection, в котором производится вызов метода в зависимости от gets.




